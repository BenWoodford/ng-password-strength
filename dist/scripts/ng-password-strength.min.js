!function(){"use strict";angular.module("ngPasswordStrength",["ngLodash"]).directive("ngPasswordStrength",["lodash",function(a){return{template:'<div class="progress"><div class="progress-bar progress-bar-{{class}}" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="100" ng-style="{width : ( value + \'%\' ) }"><span class="sr-only">{{value}}% Complete</span></div></div>',restrict:"A",scope:{pwd:"=ngPasswordStrength",value:"=strength"},link:function(b){var c=function(b){var c,d,e,f,g=function(a){for(var b=a.length-1,c="";b>=0;c+=a[b--]);return c},h={pos:{},neg:{}},i={pos:{},neg:{seqLetter:0,seqNumber:0,seqSymbol:0}},j=0,k="abcdefghijklmnopqrstuvwxyz",l="01234567890",m="\\!@#$%&/()=?Â¿";if(b){for(h.pos.lower=b.match(/[a-z]/g),h.pos.upper=b.match(/[A-Z]/g),h.pos.numbers=b.match(/\d/g),h.pos.symbols=b.match(/[$-/:-?{-~!^_`\[\]]/g),h.pos.middleNumber=b.slice(1,-1).match(/\d/g),h.pos.middleSymbol=b.slice(1,-1).match(/[$-/:-?{-~!^_`\[\]]/g),i.pos.lower=h.pos.lower?h.pos.lower.length:0,i.pos.upper=h.pos.upper?h.pos.upper.length:0,i.pos.numbers=h.pos.numbers?h.pos.numbers.length:0,i.pos.symbols=h.pos.symbols?h.pos.symbols.length:0,c=a.reduce(i.pos,function(a,b){return a+Math.min(1,b)},0),i.pos.numChars=b.length,c+=i.pos.numChars>=8?1:0,i.pos.requirements=c>=3?c:0,i.pos.middleNumber=h.pos.middleNumber?h.pos.middleNumber.length:0,i.pos.middleSymbol=h.pos.middleSymbol?h.pos.middleSymbol.length:0,h.neg.consecLower=b.match(/(?=([a-z]{2}))/g),h.neg.consecUpper=b.match(/(?=([A-Z]{2}))/g),h.neg.consecNumbers=b.match(/(?=(\d{2}))/g),h.neg.onlyNumbers=b.match(/^[0-9]*$/g),h.neg.onlyLetters=b.match(/^([a-z]|[A-Z])*$/g),i.neg.consecLower=h.neg.consecLower?h.neg.consecLower.length:0,i.neg.consecUpper=h.neg.consecUpper?h.neg.consecUpper.length:0,i.neg.consecNumbers=h.neg.consecNumbers?h.neg.consecNumbers.length:0,f=0;f<k.length-2;f++){var n=b.toLowerCase();e=k.substring(f,parseInt(f+3)),d=g(e),(-1!==n.indexOf(e)||-1!==n.indexOf(d))&&i.neg.seqLetter++}for(f=0;f<l.length-2;f++)e=l.substring(f,parseInt(f+3)),d=g(e),(-1!==b.indexOf(e)||-1!==b.toLowerCase().indexOf(d))&&i.neg.seqNumber++;for(f=0;f<m.length-2;f++)e=m.substring(f,parseInt(f+3)),d=g(e),(-1!==b.indexOf(e)||-1!==b.toLowerCase().indexOf(d))&&i.neg.seqSymbol++;i.neg.repeated=a.chain(b.toLowerCase().split("")).countBy(function(a){return a}).reject(function(a){return 1===a}).reduce(function(a,b){return a+b},0).value(),j+=4*i.pos.numChars,i.pos.upper&&(j+=2*(i.pos.numChars-i.pos.upper)),i.pos.lower&&(j+=2*(i.pos.numChars-i.pos.lower)),(i.pos.upper||i.pos.lower)&&(j+=4*i.pos.numbers),j+=6*i.pos.symbols,j+=2*(i.pos.middleSymbol+i.pos.middleNumber),j+=2*i.pos.requirements,j-=2*i.neg.consecLower,j-=2*i.neg.consecUpper,j-=2*i.neg.consecNumbers,j-=3*i.neg.seqNumber,j-=3*i.neg.seqLetter,j-=3*i.neg.seqSymbol,h.neg.onlyNumbers&&(j-=i.pos.numChars),h.neg.onlyLetters&&(j-=i.pos.numChars),i.neg.repeated&&(j-=i.neg.repeated/i.pos.numChars*10)}return Math.max(0,Math.min(100,Math.round(j)))},d=function(a){switch(Math.round(a/33)){case 0:case 1:return"danger";case 2:return"warning";case 3:return"success"}};b.$watch("pwd",function(){b.value=c(b.pwd),b["class"]=d(b.value)})}}}])}();